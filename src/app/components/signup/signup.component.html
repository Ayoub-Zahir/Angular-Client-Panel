<app-login-navbar></app-login-navbar>

<div class="uk-grid-collapse uk-child-width-expand" uk-grid style="height: calc(100vh - 70px)">

    <!-- Background img  -->
    <div class="uk-animation-slide-right">
        <div class="img-background">
        </div>
    </div>

    <!-- Sign up form -->
    <div class="uk-container uk-flex uk-flex-middle uk-flex-center uk-padding-remove-right uk-animation-slide-left">
        <form (ngSubmit)="onSubmit(signupForm)" #signupForm="ngForm" class="uk-form-stacked">
            
            <h2 class="uk-text-uppercase uk-text-center uk-heading-medium">Sign Up</h2>

            <div class="uk-fieldset uk-margin-medium-top">

                <!-- Email field  -->
                <div class="uk-margin">
                    <label class="uk-form-label" for="form-stacked-text">Email</label>
                    <div class="uk-inline">
                        <span class="uk-form-icon" uk-icon="icon: user"></span>
                        <input class="uk-input uk-form-width-large" [class.uk-form-danger]="userEmail.invalid && userEmail.touched" spellcheck="false" type="text" placeholder="example@gmail.com" name="email" [(ngModel)]="email" #userEmail="ngModel" required pattern="^\S+@\S+\.\S+">
                    </div>

                    <!-- Validation errors -->
                    <div *ngIf="userEmail.errors && userEmail.touched">
                        <p [hidden]="!userEmail.errors?.required" class="uk-text-danger" style="margin-top: 6px;font-size: .9rem;">Email required.</p>
                        <p [hidden]="!userEmail.errors?.pattern" class="uk-text-danger" style="margin-top: 6px;font-size: .9rem;">Email is not valid.</p>
                        <p [hidden]="!userEmail.errors?.emailExist" class="uk-text-danger" style="margin-top: 6px;font-size: .9rem;">The email address is already in use by another account.</p>
                    </div>
                </div>

                <!-- Password field  -->
                <div class="uk-margin">
                    <label class="uk-form-label" for="form-stacked-text">Password</label>
                    <div class="uk-inline">
                        <span class="uk-form-icon" uk-icon="icon: lock"></span>
                        <input class="uk-input uk-form-width-large" [class.uk-form-danger]="userPassword.invalid && userPassword.touched" type="password" placeholder="***********" name="password" [(ngModel)]="password" #userPassword="ngModel" minlength="6" required>
                    </div>

                    <!-- Validation errors -->
                    <div *ngIf="userPassword.errors && userPassword.touched">
                        <p [hidden]="!userPassword.errors?.required" class="uk-text-danger" style="margin-top: 6px;font-size: .9rem;">Password required.</p>
                        <p [hidden]="!userPassword.errors?.minlength" class="uk-text-danger" style="margin-top: 6px;font-size: .9rem;">Must be more at least 6 caracters.</p>
                    </div>
                </div>

                <!-- Confirm password field  -->
                <div class="uk-margin">
                    <label class="uk-form-label" for="form-stacked-text">Confirm Password</label>
                    <div class="uk-inline">
                        <span class="uk-form-icon" uk-icon="icon: lock"></span>
                        <input class="uk-input uk-form-width-large" [class.uk-form-danger]="userConfPassword.invalid && userConfPassword.touched 
                        || confirmPassword != password && userConfPassword.touched" type="password" placeholder="***********" name="confirmPassword" [(ngModel)]="confirmPassword" #userConfPassword="ngModel" minlength="6" required>
                    </div>

                    <!-- Validation errors -->
                    <p [hidden]="!userConfPassword.errors?.required || !userConfPassword.touched" class="uk-text-danger" style="margin-top: 6px;font-size: .9rem;">Confirm password required.</p>

                    <p [hidden]="confirmPassword == password || !userConfPassword.touched || userConfPassword.errors?.required" class="uk-text-danger" style="margin-top: 6px;font-size: .9rem;">Must be the same as the password.</p>
                </div>

                <!-- Submit  -->
                <div class="uk-margin" uk-grid>
                    <div class="uk-width-1-3">
                        <button [hidden]="loading" [ngClass]="(signupForm.invalid || confirmPassword != password) && userEmail.touched && userPassword.touched && userConfPassword.touched ? 'uk-button-danger' : 'uk-button-primary'" class="uk-button uk-text-bold uk-border-pill uk-float-left"
                            type="submit" style="width: 150%;">Sign Up</button>

                        <button [hidden]="!loading" class="uk-button uk-button-primary uk-text-bold uk-border-pill uk-float-left" type="submit" style="width: 150%;" uk-spinner="ratio: 0.9"></button>
                    </div>
                    <div class="uk-width-expand uk-flex uk-flex-middle">
                        <a class="uk-link-muted" routerLink="/login">You have already an account? <strong class="uk-text-primary">Log In</strong></a>
                    </div>
                </div>
            </div>
        </form>
    </div>

</div>